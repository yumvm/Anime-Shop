# Anime Shop - Серверная аутентификация

## Описание
В проект была успешно внедрена серверная аутентификация с использованием JWT-токенов и bcrypt для хеширования паролей.

## Основные изменения

### 1. Серверная аутентификация
- Добавлена регистрация с хешированием паролей
- Добавлен вход с проверкой паролей
- Реализована система JWT-токенов для аутентификации
- Созданы защищенные маршруты для профиля и других функций

### 2. Защищенные маршруты
- `/api/users/:id` - получение профиля пользователя
- `/api/users/:id` - обновление профиля пользователя
- `/api/orders` - создание заказа
- `/api/orders/:userId` - получение заказов пользователя
- `/api/cart/:userId` - получение и обновление корзины
- `/api/favs/:userId` - получение и обновление избранного
- `/api/compare/:userId` - получение и обновление сравнения

### 3. Клиентские изменения
- Обновлены API-вызовы для использования токенов
- Обновлен компонент входа/регистрации
- Обновлен компонент профиля
- Обновлен компонент заголовка для проверки аутентификации

### 4. Безопасность
- Пароли теперь хешируются с использованием bcrypt
- Доступ к защищенным маршрутам проверяется через JWT-токены
- Реализована проверка соответствия пользователя и запрашиваемых данных

## Использование

### Запуск проекта
```bash
npm run dev:all
```

Это запустит и сервер, и клиентскую часть одновременно.

### Регистрация
1. Откройте модальное окно аутентификации
2. Выберите "Регистрация"
3. Введите email, пароль, имя и фамилию
4. После успешной регистрации вы получите JWT-токен

### Вход
1. Откройте модальное окно аутентификации
2. Выберите "Вход"
3. Введите email и пароль
4. После успешного входа вы получите JWT-токен

### Выход
1. На странице профиля нажмите кнопку "Выйти"
2. Токен будет удален из localStorage

## Структура данных пользователя
```javascript
{
  id: string,           // Уникальный ID пользователя
  email: string,        // Email пользователя
  firstName: string,    // Имя пользователя
  lastName: string,     // Фамилия пользователя
  phone: string,        // Телефон (опционально)
  address: string,      // Адрес (опционально)
  role: string,         // Роль пользователя (обычно 'user')
  createdAt: string     // Дата регистрации
}
```

## Особенности реализации
- Токены хранятся в localStorage клиента
- Валидация токенов происходит на сервере
- Данные пользователей хранятся в JSON-файлах (data/users.json)
- Все пароли хешируются перед сохранением
- Пользователь может получить/обновить только свои данные